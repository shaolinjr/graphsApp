<!DOCTYPE html>
<html>
<head>
  <title>math.js | plot</title>
  <meta charset="utf-8">

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <script src="https://use.fontawesome.com/cf34f4bf55.js"></script>
  <!-- load http://maurizzzio.github.io/function-plot/ -->
  <script src="js/d3.min.js"></script>
  <script src="js/function-plot.js"></script>
  <script src="js/math.js"></script>
  <style type="text/css" rel="stylesheet" href="css/bootstrap.css"></style>
  <style type="text/css" rel="stylesheet" href="css/bootstrap-theme.css"></style>
  <!--<script src="http://cdnjs.cloudflare.com/ajax/libs/mathjax/2.3/MathJax.js?config=default.js"></script>-->
  <script type="text/javascript"
          src="js/MathJax/MathJax.js">
  </script>
  <script src="js/MathJax/config/default.js"></script>

  <style>
    input[type=text] {
      width: 300px;
    }
    input {
      padding: 6px;
    }
    body, html, input {
      font-family: sans-serif;
      font-size: 11pt;
    }
    form {
      margin: 20px 0;
    }
  </style>
</head>
<body>

  <nav class="indigo" role="navigation">
    <div class="nav-wrapper container">
      <a id="logo-container" href="#" class="brand-logo">

        <svg width="60px" height="39px" viewBox="-314 951 60 39" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <g id="Logo" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(-314.000000, 951.000000)">
                <g id="Group-3">
                    <g id="Possibilidade_01-Copy-3">
                        <g id="Graph">
                            <path d="M44.9721453,2.88373702 C46.1140138,2.88373702 47.0397924,3.82058824 47.0397924,4.97352941 C47.0397924,6.12647059 46.1140138,7.0633218 44.9721453,7.0633218 C43.8358131,7.0633218 42.9044983,6.12647059 42.9044983,4.97352941 C42.9044983,3.82058824 43.8358131,2.88373702 44.9721453,2.88373702 L44.9721453,2.88373702 Z" id="Shape" fill="#FFFFFF"></path>
                            <path d="M34.5842561,23.6375433 C34.5842561,24.7904844 33.6529412,25.7273356 32.516609,25.7273356 C31.3747405,25.7273356 30.4489619,24.7904844 30.4489619,23.6375433 C30.4489619,22.4846021 31.3747405,21.5477509 32.516609,21.5477509 C33.6529412,21.5477509 34.5842561,22.4846021 34.5842561,23.6375433 Z" id="Shape" fill="#FFFFFF"></path>
                            <path d="M16.1916955,15.1453287 C17.333564,15.1453287 18.2593426,16.0821799 18.2593426,17.2351211 C18.2593426,18.3880623 17.333564,19.3249135 16.1916955,19.3249135 C15.0553633,19.3249135 14.1240484,18.3880623 14.1240484,17.2351211 C14.1240484,16.0821799 15.0553633,15.1453287 16.1916955,15.1453287 L16.1916955,15.1453287 Z" id="Shape" fill="#FFFFFF"></path>
                            <path d="M44.9721453,0.00674740484 C47.682699,0.00674740484 49.8889273,2.23512111 49.8889273,4.97352941 C49.8889273,7.71193772 47.682699,9.94031142 44.9721453,9.94031142 C44.5896194,9.94031142 44.2238754,9.89048443 43.8634948,9.80726644 L36.5297578,20.7773356 C37.0951557,21.5866782 37.433218,22.5733564 37.433218,23.6377163 C37.433218,26.3761246 35.2269896,28.6044983 32.516436,28.6044983 C29.8058824,28.6044983 27.599654,26.3761246 27.599654,23.6377163 C27.599654,23.5323529 27.6107266,23.432699 27.616263,23.3273356 L20.0775087,20.267474 C19.1795848,21.4425606 17.7714533,22.2020761 16.1916955,22.2020761 C15.6539792,22.2020761 15.132872,22.1133218 14.6451557,21.9470588 L8.61972318,30.583391 C9.37352941,31.4591696 9.83373702,32.5955017 9.83373702,33.8371972 C9.83373702,36.5811419 7.62750865,38.8095156 4.91695502,38.8095156 C2.20640138,38.8095156 0,36.5809689 0,33.8370242 C0,31.0986159 2.20622837,28.8702422 4.91678201,28.8702422 C5.36574394,28.8702422 5.79256055,28.9366782 6.20276817,29.0531142 L12.3224913,20.283737 C11.6683391,19.4411765 11.2747405,18.3878893 11.2747405,17.2349481 C11.2747405,14.4965398 13.4809689,12.2681661 16.1915225,12.2681661 C18.9020761,12.2681661 21.1083045,14.4965398 21.1083045,17.2349481 C21.1083045,17.3513841 21.0972318,17.4622837 21.0916955,17.5730104 L28.6138408,20.6273356 C29.5117647,19.4410035 30.9254325,18.6705882 32.516263,18.6705882 C33.1370242,18.6705882 33.7302768,18.7925606 34.2735294,19.0031142 L41.3910035,8.36574394 C40.5650519,7.4733564 40.0550173,6.28702422 40.0550173,4.9733564 C40.0553633,2.23512111 42.2615917,0.00674740484 44.9721453,0.00674740484 L44.9721453,0.00674740484 Z M47.0397924,4.97352941 C47.0397924,3.82058824 46.1140138,2.88373702 44.9721453,2.88373702 C43.8358131,2.88373702 42.9044983,3.82058824 42.9044983,4.97352941 C42.9044983,6.12647059 43.8358131,7.0633218 44.9721453,7.0633218 C46.1141869,7.0633218 47.0397924,6.12647059 47.0397924,4.97352941 L47.0397924,4.97352941 Z M34.5842561,23.6375433 C34.5842561,22.4846021 33.6529412,21.5477509 32.516609,21.5477509 C31.3747405,21.5477509 30.4489619,22.4846021 30.4489619,23.6375433 C30.4489619,24.7904844 31.3747405,25.7273356 32.516609,25.7273356 C33.6529412,25.7273356 34.5842561,24.7904844 34.5842561,23.6375433 L34.5842561,23.6375433 Z M18.2593426,17.2351211 C18.2593426,16.0821799 17.333564,15.1453287 16.1916955,15.1453287 C15.0553633,15.1453287 14.1240484,16.0821799 14.1240484,17.2351211 C14.1240484,18.3880623 15.0553633,19.3249135 16.1916955,19.3249135 C17.333737,19.3249135 18.2593426,18.3880623 18.2593426,17.2351211 L18.2593426,17.2351211 Z M6.98442907,33.8370242 C6.98442907,32.6896194 6.05865052,31.7527682 4.91678201,31.7527682 C3.77491349,31.7527682 2.84913495,32.6896194 2.84913495,33.8370242 C2.84913495,34.9899654 3.77491349,35.9268166 4.91678201,35.9268166 C6.05865052,35.9268166 6.98442907,34.9899654 6.98442907,33.8370242 L6.98442907,33.8370242 Z" id="Shape" fill="#FF6881"></path>
                            <path d="M4.91678201,31.7527682 C6.05865052,31.7527682 6.98442907,32.6896194 6.98442907,33.8370242 C6.98442907,34.9899654 6.05865052,35.9268166 4.91678201,35.9268166 C3.77491349,35.9268166 2.84913495,34.9899654 2.84913495,33.8370242 C2.84913495,32.6896194 3.77491349,31.7527682 4.91678201,31.7527682 L4.91678201,31.7527682 Z" id="Shape" fill="#FFFFFF"></path>
                        </g>
                    </g>
                    <g id="Possibilidade_01-Copy-2" transform="translate(5.000000, 0.000000)">
                        <g id="Graph">
                            <path d="M44.9721453,2.88373702 C46.1140138,2.88373702 47.0397924,3.82058824 47.0397924,4.97352941 C47.0397924,6.12647059 46.1140138,7.0633218 44.9721453,7.0633218 C43.8358131,7.0633218 42.9044983,6.12647059 42.9044983,4.97352941 C42.9044983,3.82058824 43.8358131,2.88373702 44.9721453,2.88373702 L44.9721453,2.88373702 Z" id="Shape" fill="#FFFFFF"></path>
                            <path d="M34.5842561,23.6375433 C34.5842561,24.7904844 33.6529412,25.7273356 32.516609,25.7273356 C31.3747405,25.7273356 30.4489619,24.7904844 30.4489619,23.6375433 C30.4489619,22.4846021 31.3747405,21.5477509 32.516609,21.5477509 C33.6529412,21.5477509 34.5842561,22.4846021 34.5842561,23.6375433 Z" id="Shape" fill="#FFFFFF"></path>
                            <path d="M16.1916955,15.1453287 C17.333564,15.1453287 18.2593426,16.0821799 18.2593426,17.2351211 C18.2593426,18.3880623 17.333564,19.3249135 16.1916955,19.3249135 C15.0553633,19.3249135 14.1240484,18.3880623 14.1240484,17.2351211 C14.1240484,16.0821799 15.0553633,15.1453287 16.1916955,15.1453287 L16.1916955,15.1453287 Z" id="Shape" fill="#FFFFFF"></path>
                            <path d="M44.9721453,0.00674740484 C47.682699,0.00674740484 49.8889273,2.23512111 49.8889273,4.97352941 C49.8889273,7.71193772 47.682699,9.94031142 44.9721453,9.94031142 C44.5896194,9.94031142 44.2238754,9.89048443 43.8634948,9.80726644 L36.5297578,20.7773356 C37.0951557,21.5866782 37.433218,22.5733564 37.433218,23.6377163 C37.433218,26.3761246 35.2269896,28.6044983 32.516436,28.6044983 C29.8058824,28.6044983 27.599654,26.3761246 27.599654,23.6377163 C27.599654,23.5323529 27.6107266,23.432699 27.616263,23.3273356 L20.0775087,20.267474 C19.1795848,21.4425606 17.7714533,22.2020761 16.1916955,22.2020761 C15.6539792,22.2020761 15.132872,22.1133218 14.6451557,21.9470588 L8.61972318,30.583391 C9.37352941,31.4591696 9.83373702,32.5955017 9.83373702,33.8371972 C9.83373702,36.5811419 7.62750865,38.8095156 4.91695502,38.8095156 C2.20640138,38.8095156 0,36.5809689 0,33.8370242 C0,31.0986159 2.20622837,28.8702422 4.91678201,28.8702422 C5.36574394,28.8702422 5.79256055,28.9366782 6.20276817,29.0531142 L12.3224913,20.283737 C11.6683391,19.4411765 11.2747405,18.3878893 11.2747405,17.2349481 C11.2747405,14.4965398 13.4809689,12.2681661 16.1915225,12.2681661 C18.9020761,12.2681661 21.1083045,14.4965398 21.1083045,17.2349481 C21.1083045,17.3513841 21.0972318,17.4622837 21.0916955,17.5730104 L28.6138408,20.6273356 C29.5117647,19.4410035 30.9254325,18.6705882 32.516263,18.6705882 C33.1370242,18.6705882 33.7302768,18.7925606 34.2735294,19.0031142 L41.3910035,8.36574394 C40.5650519,7.4733564 40.0550173,6.28702422 40.0550173,4.9733564 C40.0553633,2.23512111 42.2615917,0.00674740484 44.9721453,0.00674740484 L44.9721453,0.00674740484 Z M47.0397924,4.97352941 C47.0397924,3.82058824 46.1140138,2.88373702 44.9721453,2.88373702 C43.8358131,2.88373702 42.9044983,3.82058824 42.9044983,4.97352941 C42.9044983,6.12647059 43.8358131,7.0633218 44.9721453,7.0633218 C46.1141869,7.0633218 47.0397924,6.12647059 47.0397924,4.97352941 L47.0397924,4.97352941 Z M34.5842561,23.6375433 C34.5842561,22.4846021 33.6529412,21.5477509 32.516609,21.5477509 C31.3747405,21.5477509 30.4489619,22.4846021 30.4489619,23.6375433 C30.4489619,24.7904844 31.3747405,25.7273356 32.516609,25.7273356 C33.6529412,25.7273356 34.5842561,24.7904844 34.5842561,23.6375433 L34.5842561,23.6375433 Z M18.2593426,17.2351211 C18.2593426,16.0821799 17.333564,15.1453287 16.1916955,15.1453287 C15.0553633,15.1453287 14.1240484,16.0821799 14.1240484,17.2351211 C14.1240484,18.3880623 15.0553633,19.3249135 16.1916955,19.3249135 C17.333737,19.3249135 18.2593426,18.3880623 18.2593426,17.2351211 L18.2593426,17.2351211 Z M6.98442907,33.8370242 C6.98442907,32.6896194 6.05865052,31.7527682 4.91678201,31.7527682 C3.77491349,31.7527682 2.84913495,32.6896194 2.84913495,33.8370242 C2.84913495,34.9899654 3.77491349,35.9268166 4.91678201,35.9268166 C6.05865052,35.9268166 6.98442907,34.9899654 6.98442907,33.8370242 L6.98442907,33.8370242 Z" id="Shape" fill="#FF5481"></path>
                            <path d="M4.91678201,31.7527682 C6.05865052,31.7527682 6.98442907,32.6896194 6.98442907,33.8370242 C6.98442907,34.9899654 6.05865052,35.9268166 4.91678201,35.9268166 C3.77491349,35.9268166 2.84913495,34.9899654 2.84913495,33.8370242 C2.84913495,32.6896194 3.77491349,31.7527682 4.91678201,31.7527682 L4.91678201,31.7527682 Z" id="Shape" fill="#FFFFFF"></path>
                        </g>
                    </g>
                </g>
                <g id="Possibilidade_01-Copy" transform="translate(10.000000, 0.000000)">
                    <g id="line-chart-4">
                        <g id="XMLID_27_">
                            <g id="Group">
                                <path d="M44.9721453,2.88373702 C46.1140138,2.88373702 47.0397924,3.82058824 47.0397924,4.97352941 C47.0397924,6.12647059 46.1140138,7.0633218 44.9721453,7.0633218 C43.8358131,7.0633218 42.9044983,6.12647059 42.9044983,4.97352941 C42.9044983,3.82058824 43.8358131,2.88373702 44.9721453,2.88373702 L44.9721453,2.88373702 Z" id="Shape" fill="#FFFFFF"></path>
                                <path d="M34.5842561,23.6375433 C34.5842561,24.7904844 33.6529412,25.7273356 32.516609,25.7273356 C31.3747405,25.7273356 30.4489619,24.7904844 30.4489619,23.6375433 C30.4489619,22.4846021 31.3747405,21.5477509 32.516609,21.5477509 C33.6529412,21.5477509 34.5842561,22.4846021 34.5842561,23.6375433 Z" id="Shape" fill="#FFFFFF"></path>
                                <path d="M16.1916955,15.1453287 C17.333564,15.1453287 18.2593426,16.0821799 18.2593426,17.2351211 C18.2593426,18.3880623 17.333564,19.3249135 16.1916955,19.3249135 C15.0553633,19.3249135 14.1240484,18.3880623 14.1240484,17.2351211 C14.1240484,16.0821799 15.0553633,15.1453287 16.1916955,15.1453287 L16.1916955,15.1453287 Z" id="Shape" fill="#FFFFFF"></path>
                                <path d="M44.9721453,0.00674740484 C47.682699,0.00674740484 49.8889273,2.23512111 49.8889273,4.97352941 C49.8889273,7.71193772 47.682699,9.94031142 44.9721453,9.94031142 C44.5896194,9.94031142 44.2238754,9.89048443 43.8634948,9.80726644 L36.5297578,20.7773356 C37.0951557,21.5866782 37.433218,22.5733564 37.433218,23.6377163 C37.433218,26.3761246 35.2269896,28.6044983 32.516436,28.6044983 C29.8058824,28.6044983 27.599654,26.3761246 27.599654,23.6377163 C27.599654,23.5323529 27.6107266,23.432699 27.616263,23.3273356 L20.0775087,20.267474 C19.1795848,21.4425606 17.7714533,22.2020761 16.1916955,22.2020761 C15.6539792,22.2020761 15.132872,22.1133218 14.6451557,21.9470588 L8.61972318,30.583391 C9.37352941,31.4591696 9.83373702,32.5955017 9.83373702,33.8371972 C9.83373702,36.5811419 7.62750865,38.8095156 4.91695502,38.8095156 C2.20640138,38.8095156 0,36.5809689 0,33.8370242 C0,31.0986159 2.20622837,28.8702422 4.91678201,28.8702422 C5.36574394,28.8702422 5.79256055,28.9366782 6.20276817,29.0531142 L12.3224913,20.283737 C11.6683391,19.4411765 11.2747405,18.3878893 11.2747405,17.2349481 C11.2747405,14.4965398 13.4809689,12.2681661 16.1915225,12.2681661 C18.9020761,12.2681661 21.1083045,14.4965398 21.1083045,17.2349481 C21.1083045,17.3513841 21.0972318,17.4622837 21.0916955,17.5730104 L28.6138408,20.6273356 C29.5117647,19.4410035 30.9254325,18.6705882 32.516263,18.6705882 C33.1370242,18.6705882 33.7302768,18.7925606 34.2735294,19.0031142 L41.3910035,8.36574394 C40.5650519,7.4733564 40.0550173,6.28702422 40.0550173,4.9733564 C40.0553633,2.23512111 42.2615917,0.00674740484 44.9721453,0.00674740484 L44.9721453,0.00674740484 Z M47.0397924,4.97352941 C47.0397924,3.82058824 46.1140138,2.88373702 44.9721453,2.88373702 C43.8358131,2.88373702 42.9044983,3.82058824 42.9044983,4.97352941 C42.9044983,6.12647059 43.8358131,7.0633218 44.9721453,7.0633218 C46.1141869,7.0633218 47.0397924,6.12647059 47.0397924,4.97352941 L47.0397924,4.97352941 Z M34.5842561,23.6375433 C34.5842561,22.4846021 33.6529412,21.5477509 32.516609,21.5477509 C31.3747405,21.5477509 30.4489619,22.4846021 30.4489619,23.6375433 C30.4489619,24.7904844 31.3747405,25.7273356 32.516609,25.7273356 C33.6529412,25.7273356 34.5842561,24.7904844 34.5842561,23.6375433 L34.5842561,23.6375433 Z M18.2593426,17.2351211 C18.2593426,16.0821799 17.333564,15.1453287 16.1916955,15.1453287 C15.0553633,15.1453287 14.1240484,16.0821799 14.1240484,17.2351211 C14.1240484,18.3880623 15.0553633,19.3249135 16.1916955,19.3249135 C17.333737,19.3249135 18.2593426,18.3880623 18.2593426,17.2351211 L18.2593426,17.2351211 Z M6.98442907,33.8370242 C6.98442907,32.6896194 6.05865052,31.7527682 4.91678201,31.7527682 C3.77491349,31.7527682 2.84913495,32.6896194 2.84913495,33.8370242 C2.84913495,34.9899654 3.77491349,35.9268166 4.91678201,35.9268166 C6.05865052,35.9268166 6.98442907,34.9899654 6.98442907,33.8370242 L6.98442907,33.8370242 Z" id="Shape" fill="#FF4081"></path>
                                <path d="M4.91678201,31.7527682 C6.05865052,31.7527682 6.98442907,32.6896194 6.98442907,33.8370242 C6.98442907,34.9899654 6.05865052,35.9268166 4.91678201,35.9268166 C3.77491349,35.9268166 2.84913495,34.9899654 2.84913495,33.8370242 C2.84913495,32.6896194 3.77491349,31.7527682 4.91678201,31.7527682 L4.91678201,31.7527682 Z" id="Shape" fill="#FFFFFF"></path>
                            </g>
                        </g>
                    </g>
                </g>
            </g>
        </svg><span class="logo-font">Graphs</span>
      </a>
      <!-- <ul class="right hide-on-med-and-down">
        <li><a href="#">Navbar Link</a></li>
      </ul>
      <ul id="nav-mobile" class="side-nav">
        <li><a href="#">Navbar Link</a></li>
      </ul> -->
      <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
  </nav>


<div id="container" class="row">
  <div class="row">
      <form class="col s12">
        <div class="row">
          <div class="input-field col s3">
            <input placeholder="Placeholder" id="first_name" type="text" class="validate">
            <label for="first_name">digite a função</label>
          </div>
          <div class="input-field col s6">
            <input id="last_name" type="text" class="validate">
            <label for="last_name">digite a função inversa</label>
          </div>
        </div>
  <div class="row">
      <div class="col m3">
        <div class="indigo col m7">
          <a class="btn-flat white-text" style="text-transform: lowercase;font-size:16px;">plotar gráfico</a>
        </div>
      </div>
     </div>
  </form>
</div>
<div class="row">
  <form class="col s12">
      <div class="row">
        <div class="input-field col -s6">
          <input id="first_name" type="text" class="validate">
          <label for="first_name">Valor para calcular o limite:</label>
        </div>
      </div>
      <div class="row">
        <div class="col m3">
          <div class="indigo col m7">
            <a class="btn-flat white-text hoverable" style="text-transform: lowercase;font-size:16px;">calcular limite</a>
          </div>
        </div>
     </div>
  </form>
</div>
</div>

<div id="plot"></div>
<p id="limit-result"></p>
<div style="padding: 20px; border:1px solid #444; -webkit-border-radius: 4px;-moz-border-radius: 4px;border-radius: 4px;">
  <div id="pretty"></div>
</div>

<p>
  Plot library: <a href="https://github.com/maurizzzio/function-plot">https://github.com/maurizzzio/function-plot</a>
</p>
<script type="text/javascript" src="js/jquery.js"></script>
<script src="js/bootstrap.js"></script>
<script src="js/Ratio-0.4.1.min.js"></script>
<script type="text/javascript" src="js/nerdamer.core.js"></script>
<script type="text/javascript" src="js/Calculus.js"></script>

<script>
  function calculateLimit (equation, xToLimit){
    parser = math.parser();
    if (equation.indexOf('/') >=0){
      // temos que pegar a equação antes da barra e a equação depois da barra para dar eval separado
      // result = numerador + '/'+ denominador
      // em seguida mandamos o Ratio simplificar..\
      // separamos as equações
      numerador   = equation.split("/")[0].replace("(","").replace(")","");
      denominador = equation.split("/")[1].replace("(","").replace(")","");
      // validamos e calculamos os valores dos limites
      numerador   = parser.eval("f(x)="+numerador);
      numerador   = parser.eval("f("+xToLimit+")");
      console.log("Numerador: "+numerador);
      denominador = parser.eval("f(x)="+denominador);
      denominador = parser.eval("f("+xToLimit+")");
      console.log("Denominador: "+denominador);
      // montamos o resultado
      result = numerador + "/" + denominador; //type string
      console.log("Resultado: "+ result);
    }
    else{
      result = parser.eval("f(x)="+equation);
//      result = parseFloat(parser.eval("f("+xToLimit+")")); //type int\
      if (Number.isInteger(parser.eval("f("+xToLimit+")"))){
        result = parseInt(parser.eval("f("+xToLimit+")"));
      }else{
        result = parseFloat(math.format(parser.eval("f("+xToLimit+")"),{precision:4}));
        console.log("Wasn't an integer")
      }
    }
    if (typeof result == "string" || !Number.isInteger(result)){
      // result = result.toString().substring(2);
      // result = decimalToFraction(result);
      // usar o Ratio
      result = Ratio.parse(result).simplify();
    }else if (isNaN(result)){
      // deu indeterminação
      result = "0/0 (Indeterminação matemática)";
    }
    return result;
  }
  function calculateDerivative (equation, symbol){
    var derivative = nerdamer (`diff(${equation},x)`);
//    console.log(`Derivada de ${equation} é : ${derivative.text()}`)
    return derivative.toString();
  }
  function drawGraph(equationId){
    let equation = document.querySelector(equationId).value;
    let tex = "$$"+formatToTex(equation)+ "$$";
    console.log(tex);
    try {
      functionPlot({
        target: '#plot',
        title: tex,
        data: [{
          fn: equation,
          sampler: 'builtIn',  // this will make function-plot use the evaluator of math.js
          graphType: 'polyline',
          derivative:{
            fn: calculateDerivative(equation, "x"),
            // x0: 2,
            updateOnMouseMove:true
          }
        }]
      });
    }
    catch (err) {
      console.log(err);
      alert(err);
    }
  }
  document.getElementById('graph-form').onsubmit = function (event) {
    let equation = document.querySelector("#eq").value;
    event.preventDefault();
    drawGraph("#eq");
    calculateDerivative(equation);
//    MathJax.Hub.Typeset();
    MathJax.Hub.Queue(["Typeset",MathJax.Hub,"plot"]);
    // document.querySelector("#limit-result").textContent = `O valor do limite é: ${calculateLimit.calculate()}`;
  };
  document.getElementById('limit-form').onsubmit = function (event) {
    event.preventDefault();
    let equation = document.querySelector("#eq").value;
    let xToLimit = document.querySelector("#x-to-limit").value;
    let limit = calculateLimit(equation, xToLimit);
    document.querySelector("#limit-result").textContent = `O resultado do limite é: ${limit}`;
  }
  var expr = document.getElementById('eq'),
          pretty = document.getElementById('pretty'),
          parenthesis = 'auto',
          implicit = 'show';
  // initialize with an example expression
  //expr.value = 'sqrt(75 / 3) + det([[-1, 2], [3, 1]]) - sin(pi / 4)^2';
  pretty.innerHTML = '$$' + math.parse(expr.value).toTex({parenthesis: parenthesis}) + '$$';
  //result.innerHTML = math.format(math.eval(expr.value));
  expr.oninput = function () {
    try {
      // export the expression to LaTeX
      //var latex = node ? node.toTex({parenthesis: parenthesis, implicit: implicit}) : '';
      var latex = formatToTex(expr.value);
      console.log('LaTeX expression:', latex);
      // display and re-render the expression
      var elem = MathJax.Hub.getAllJax('pretty')[0];
      MathJax.Hub.Queue(['Text', elem, latex]);
    }
    catch (err) {
      console.log(err.toString());
    }
  };
  function formatToTex (expressionValue){
    var node = math.parse(expressionValue);
    var latex;
    if (node){
      latex =  node.toTex({parenthesis: "auto", implicit: "show"});
    }else {
      latex = "";
    }
    return `${latex}`;
  }
</script>

    <!--  Scripts-->
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="js/materialize.js"></script>
    <script src="js/materialize.min.js"></script>

    <footer class="page-footer pink" style="padding-top: 0px">
      <div class="footer-copyright">
        <div class="container">
        Made with <i class="fa fa-heart"></i> in 2016
        </div>
      </div>
    </footer>

</body>
</html>
